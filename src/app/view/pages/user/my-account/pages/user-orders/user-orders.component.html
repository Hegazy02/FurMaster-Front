<div class="filters">
  <app-primary-drop-down
    [buttonText]="selectedStatusText"
    [options]="statusOptions"
    (onClickChange)="onStatusChange($event)"
  ></app-primary-drop-down>

  <div class="date-group">
    <span>From</span>
    <input type="date" [(ngModel)]="dateFrom" (change)="loadOrders()" />
  </div>

  <div class="date-group">
    <span> To</span>
    <input type="date" [(ngModel)]="dateTo" (change)="loadOrders()" />
  </div>


<h2>
  <span class="material-icons">inventory_2</span>

  your orders
</h2>
<div *ngIf="loading" class="loader-container">    <div class="loader w-25"></div>
</div>
 <div *ngIf="!loading && error" class="flex justify-center items-center" class="empty-orders ">
      <app-error ></app-error>
    </div>

<div *ngIf="!loading && orders.length === 0" class="empty-orders ">
  <app-empty-data class=""
    [title]="'No orders found'"
    [subtitle]="'Try adjusting your filters'"
  ></app-empty-data>
</div>

<div *ngFor="let order of orders"
     class="w-full max-w-4xl mx-auto my-4 p-4 rounded-lg border border-gray-200 shadow transition hover:-translate-y-1 hover:shadow-lg">

  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-3">
    <span [ngClass]="{
      'bg-yellow-100 text-yellow-700': order.status === 'pending',
      'bg-green-100 text-green-700': order.status === 'completed',
      'bg-red-100 text-red-600': order.status === 'cancelled',
      'bg-indigo-100 text-indigo-700': order.status === 'processing'
    }" class="px-3 py-1 rounded-full text-sm font-semibold">
      {{ order.status | titlecase }}
    </span>
    <span class="text-sm text-gray-600">
      {{ order.createdAt | date : "dd MMM yyyy, hh:mm a" }}
    </span>
  </div>

  <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
    <img [src]="order.products[0].image"
         alt="product image"
         class="w-full sm:w-32 h-48 sm:h-[87px] object-cover rounded-lg bg-gray-200" />
         
    <div class="text-sm space-y-1">
      <div class="font-semibold">Order ID: {{ order.orderId }}</div>
      <div>{{ getProductNames(order.products) }}</div>
      <div class=" price text-[rgba(13,148,136,0.8)] font-bold ">{{ order.amountTotal }} EGP</div>
    </div>
  </div>
</div>

<div class="mt-6 max-w-4xl mx-auto">
  <mat-paginator
    class="w-full"
    [length]="totalItems"
    [pageSize]="limit"
    [pageSizeOptions]="[10]"
    [pageIndex]="page - 1"
    (page)="onPageChange($event)">
  </mat-paginator>
</div>
